<!DOCTYPE html>
<html>
    <head>
        <title>cf proxy</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script>
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
              }

            var current_url = new URL(document.URL);

            var new_url = current_url.origin + "/nav"  ; //current_url.pathname.split("/")[1];

            async function redirect(url, s) {

                console.log(`redirect to ${url}`);
                var c = document.getElementById("redirect_counter");
                c.textContent=s;
                for( var i = s ; i > 1; i--){
                    await sleep(1000); 
                    c.textContent=i;
                }
                console.log("location.href = url;");
                location.href = url;
              }
            const timeoutId = setTimeout(redirect, 1, new_url,5);

              
        </script>
    </head>
    <body>
        <div id="info">
            Login {login_status}! Redirect to <a href="/nav">/nav</a> after <a id="redirect_counter">3</a> seconds...
        </div>
    </body>
</html>
